<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Score Page</title>
    <link rel="stylesheet" href="../Static/Css/scoreStyle.css"></link>
</head>
<body>
    <div>
        <div id="border">
            <img  id="logo" src="../Static/Images/Logo/LogoImage@2x.png" alt="logo" width="200px" height="200px" id="logo">
            <div id="innerborder" class="glassmorph">
                <h3 id="heading">Score</h3>
                <header>
                <list>
                    <ul  id="list">
                        <li>Name</li>
                        <li>Date</li>
                        <li>Score</li>
                    </ul>
                </list>
                </header>
                <div id="box">
                    dsfjdlfj
                </div>               
           </div>
        </div>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need 

        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js";
    
        const firebaseConfig = {
          apiKey: "AIzaSyBsyVtOoFq8uq5LuCPphf0xKBMybzY0SV0",
          authDomain: "water-color-sorting-4af16.firebaseapp.com",
          databaseURL: "https://water-color-sorting-4af16-default-rtdb.firebaseio.com",
          projectId: "water-color-sorting-4af16",
          storageBucket: "water-color-sorting-4af16.appspot.com",
          messagingSenderId: "266693134987",
          appId: "1:266693134987:web:5ca168d951d94ebf41e28e"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        import{getDatabase, ref, get, set, child, update, remove}
        from "https://www.gstatic.com/firebasejs/9.6.6/firebase-database.js";

        const db= getDatabase();

        // Fetch data from  DB
        allScoreFetch();

        function allScoreFetch(){

            const databaseRef=ref(db);
            
            get(child(databaseRef,"User")).then((snapshot)=>{

                if(snapshot.exists()){
                   console.log(snapshot.val()); 

                   let box=document.getElementById("box");
                   let boxInnerStuff= "";
                    //alert(box.innerHTML);
                    // alert(typeof(snapshot.val()));
                    // alert(Object.keys(snapshot.val()).length);
                    // console.log();

                   for(let scoreDataItr=0; scoreDataItr<=Object.keys(snapshot.val()).length; scoreDataItr++) 
                   {
                    let oneScoreRow = snapshot.val()[scoreDataItr];
                    boxInnerStuff = boxInnerStuff + `<header class="heading">`+
                        `<list>`+
                            `<ul class="innerHeaderListItems">`+
                                `<li>${oneScoreRow.userName}</li>`+
                                `<li>${oneScoreRow.date}</li>`+
                                `<li>${oneScoreRow.score}</li>`+
                            `</ul>`+                        
                        `</list>`+
                    `</header>`
                    console.log(oneScoreRow);
                   }
                //    console.log(boxInnerStuff);
                //    box.innerHTML = boxInnerStuff;
                }
                else{
                    console.log("if nahi chala");
                }
            });

        }
    
    </script>

     <!-- Option 1: Bootstrap Bundle with Popper -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    
</body>
</html>